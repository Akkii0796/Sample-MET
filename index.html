<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expense Tracker</title>
    <!-- Firebase JS SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <!-- jsPDF and AutoTable libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
    <style>
        /* ...existing CSS... */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 10px; }
        .container { max-width: 1200px; margin: 0 auto; background: rgba(255,255,255,0.95); border-radius: 20px; backdrop-filter: blur(10px); box-shadow: 0 20px 40px rgba(0,0,0,0.1); overflow: hidden; animation: slideUp 0.5s ease-out; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(30px);} to { opacity: 1; transform: translateY(0);} }
        /* [the rest of your CSS as before] */
        /* Keep all existing styles unchanged */
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸ’° Expense Tracker - <span id="currentMonth"></span></h1>
            <p>Track your expenses and manage your budget efficiently</p>
        </div>
        <div class="main-content">
            <!-- Budget Section -->
            <div class="card">
                <h2>ðŸŽ¯ Set Monthly Budget</h2>
                <div id="syncStatus" class="sync-status" style="display:none;"></div>
                <div class="input-group">
                    <label for="budgetAmount">Budget Amount (â‚¹)</label>
                    <input type="number" id="budgetAmount" placeholder="Enter your monthly budget">
                </div>
                <button class="btn" onclick="setBudget(event)">Set Budget</button>
                <div class="budget-summary">
                    <div class="budget-item budget"><h3>Budget</h3><div class="amount" id="budgetDisplay">â‚¹0</div></div>
                    <div class="budget-item spent"><h3>Total Spent</h3><div class="amount" id="totalSpent">â‚¹0</div></div>
                    <div class="budget-item remaining"><h3>Remaining</h3><div class="amount" id="remaining">â‚¹0</div></div>
                </div>
            </div>
            <!-- Add Expense Section -->
            <div class="card">
                <h2>âž• Add Expense</h2>
                <div class="input-group"><label>Who is adding this expense?</label><div class="radio-group">
                    <div class="radio-option"><input type="radio" id="akshay" name="addedBy" value="Akshay" checked><label for="akshay">Akshay</label></div>
                    <div class="radio-option"><input type="radio" id="achal" name="addedBy" value="Achal"><label for="achal">Achal</label></div>
                </div></div>
                <div class="input-group"><label for="category">Category</label><select id="category">
                    <!-- options... -->
                </select></div>
                <!-- vendor, amount, note groups -->
                <button class="btn btn-secondary" onclick="addExpense(event)">Add Expense</button>
            </div>
            <!-- Recent Expenses, Stats, Summaries, Export Buttons (same as before) -->
        </div>
    </div>
    <script>
        // Initialize Firebase
        <script type="module">
  // Import the functions you need from the SDKs you need
  //import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.0/firebase-app.js";
  //import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.9.0/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyCVcdGryuTGeMS2Aq9C2cqbeNmfnddDIu8",
    authDomain: "monthly-expense-tracker-179de.firebaseapp.com",
    databaseURL: "https://monthly-expense-tracker-179de-default-rtdb.firebaseio.com",
    projectId: "monthly-expense-tracker-179de",
    storageBucket: "monthly-expense-tracker-179de.firebasestorage.app",
    messagingSenderId: "927646586236",
    appId: "1:927646586236:web:fc56a0334a31464cf000f9",
    measurementId: "G-CVR339GKH9"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
</script>
        firebase.initializeApp(firebaseConfig);
        const dbRef = firebase.database().ref('expenseTracker');

        // Local state
        let budget = 0;
        let expenses = [];

        // Listen for remote changes
        dbRef.on('value', snapshot => {
            const data = snapshot.val();
            if (data) {
                if (data.budget != null) budget = data.budget;
                if (data.expenses != null) expenses = data.expenses;
                document.getElementById('budgetAmount').value = budget;
                updateDisplay();
                showSyncStatus('Data synchronized!', 'success');
            }
        });

        function syncToCloud() {
            return dbRef.set({ budget, expenses })
                .then(() => showSyncStatus('Data synced to cloud!', 'success'))
                .catch(err => showSyncStatus('Cloud sync failed.', 'error'));
        }

        // Other helper functions (setCurrentMonth, showSyncStatus) remain the same
        window.onload = () => {
            setCurrentMonth();
            updateDisplay();
        };

        function setBudget(e) {
            const val = parseFloat(document.getElementById('budgetAmount').value);
            if (!val || val <= 0) return alert('Enter valid budget');
            budget = val;
            syncToCloud();
        }

        function addExpense(e) {
            // validate inputs
            const now = new Date();
            const expense = { id: Date.now(), date: now.toLocaleDateString('en-GB'), time: now.toLocaleTimeString(), /* ...other props*/ };
            expenses.push(expense);
            syncToCloud();
        }

        // updateDisplay, updateBudgetSummary, etc. remain unchanged

        // CSV/PDF export remain unchanged
    </script>
</body>
</html>
